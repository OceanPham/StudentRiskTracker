<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéì H·ªá th·ªëng ƒê√°nh gi√° R·ªßi ro B·ªè h·ªçc Sinh vi√™n</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1>üéì H·ªá th·ªëng ƒê√°nh gi√° R·ªßi ro B·ªè h·ªçc Sinh vi√™n</h1>
                <p>Ph√¢n t√≠ch v√† d·ª± ƒëo√°n nguy c∆° b·ªè h·ªçc d·ª±a tr√™n d·ªØ li·ªáu h√†nh vi h·ªçc t·∫≠p</p>
            </div>
            <div class="header-actions">
                <button class="btn btn-primary" onclick="openConfigModal()">
                    <i class="fas fa-cog"></i> C·∫•u h√¨nh
                </button>
                <button class="btn btn-success" onclick="refreshData()">
                    <i class="fas fa-sync-alt"></i> L√†m m·ªõi
                </button>
            </div>
        </header>

        <!-- Stats Cards -->
        <div class="stats-grid">
            <div class="stat-card low-risk">
                <div class="stat-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="stat-info">
                    <h3 id="lowRiskCount">0</h3>
                    <p>R·ªßi ro Th·∫•p</p>
                </div>
            </div>
            <div class="stat-card medium-risk">
                <div class="stat-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="stat-info">
                    <h3 id="mediumRiskCount">0</h3>
                    <p>R·ªßi ro Trung b√¨nh</p>
                </div>
            </div>
            <div class="stat-card high-risk">
                <div class="stat-icon">
                    <i class="fas fa-times-circle"></i>
                </div>
                <div class="stat-info">
                    <h3 id="highRiskCount">0</h3>
                    <p>R·ªßi ro Cao</p>
                </div>
            </div>
            <div class="stat-card total">
                <div class="stat-icon">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-info">
                    <h3 id="totalStudents">0</h3>
                    <p>T·ªïng sinh vi√™n</p>
                </div>
            </div>
        </div>

        <!-- Controls -->
        <div class="controls">
            <div class="search-filter">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="T√¨m ki·∫øm theo t√™n ho·∫∑c ID sinh vi√™n...">
                </div>
                <div class="filter-group">
                    <label for="riskFilter">L·ªçc theo m·ª©c r·ªßi ro:</label>
                    <select id="riskFilter">
                        <option value="">T·∫•t c·∫£</option>
                        <option value="LOW">R·ªßi ro Th·∫•p</option>
                        <option value="MEDIUM">R·ªßi ro Trung b√¨nh</option>
                        <option value="HIGH">R·ªßi ro Cao</option>
                        <option value="NOT_EVALUATED">Ch∆∞a ƒë√°nh gi√°</option>
                    </select>
                </div>
                <div class="sort-group">
                    <label for="sortBy">S·∫Øp x·∫øp theo:</label>
                    <select id="sortBy">
                        <option value="name">T√™n A-Z</option>
                        <option value="name_desc">T√™n Z-A</option>
                        <option value="risk_desc">R·ªßi ro cao tr∆∞·ªõc</option>
                        <option value="risk_asc">R·ªßi ro th·∫•p tr∆∞·ªõc</option>
                        <option value="probability_desc">X√°c su·∫•t cao tr∆∞·ªõc</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Student List -->
        <div class="student-list-container">
            <div class="section-header">
                <h2>üìã Danh s√°ch Sinh vi√™n</h2>
                <div class="section-actions">
                    <button class="btn btn-warning" onclick="evaluateAllStudents()">
                        <i class="fas fa-calculator"></i> ƒê√°nh gi√° t·∫•t c·∫£
                    </button>
                </div>
            </div>

            <!-- Loading Indicator -->
            <div id="loadingIndicator" class="loading-indicator">
                <div class="spinner"></div>
                <p>ƒêang t·∫£i d·ªØ li·ªáu...</p>
            </div>

            <!-- Student Table -->
            <div class="table-container">
                <table class="student-table" id="studentTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>T√™n sinh vi√™n</th>
                            <th>Email</th>
                            <th>ƒêi·ªÉm r·ªßi ro</th>
                            <th>M·ª©c ƒë·ªô r·ªßi ro</th>
                            <th>X√°c su·∫•t b·ªè h·ªçc</th>
                            <th>Ng√†y ƒë√°nh gi√°</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="studentTableBody">
                        <!-- Data will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="empty-state" style="display: none;">
                <i class="fas fa-users-slash"></i>
                <h3>Kh√¥ng c√≥ sinh vi√™n n√†o</h3>
                <p>Kh√¥ng t√¨m th·∫•y sinh vi√™n ph√π h·ª£p v·ªõi ti√™u ch√≠ l·ªçc.</p>
            </div>
        </div>
    </div>

    <!-- Student Detail Modal -->
    <div id="studentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Chi ti·∫øt Sinh vi√™n</h2>
                <span class="close" onclick="closeStudentModal()">&times;</span>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Student details will be populated here -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeStudentModal()">ƒê√≥ng</button>
                <button class="btn btn-primary" id="evaluateBtn" onclick="evaluateStudent()">
                    <i class="fas fa-calculator"></i> ƒê√°nh gi√° r·ªßi ro
                </button>
            </div>
        </div>
    </div>

    <!-- Configuration Modal -->
    <div id="configModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚öôÔ∏è C·∫•u h√¨nh Ng∆∞·ª°ng ƒê√°nh gi√°</h2>
                <span class="close" onclick="closeConfigModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="configForm">
                    <div class="form-group">
                        <label for="attendanceThreshold">Ng∆∞·ª°ng t·ª∑ l·ªá tham d·ª± (%):</label>
                        <input type="number" id="attendanceThreshold" min="0" max="100" step="1" required>
                        <small>Sinh vi√™n c√≥ t·ª∑ l·ªá tham d·ª± th·∫•p h∆°n ng∆∞·ª°ng n√†y s·∫Ω ƒë∆∞·ª£c c·ªông 1 ƒëi·ªÉm r·ªßi ro</small>
                    </div>
                    <div class="form-group">
                        <label for="assignmentThreshold">Ng∆∞·ª°ng t·ª∑ l·ªá n·ªôp b√†i t·∫≠p (%):</label>
                        <input type="number" id="assignmentThreshold" min="0" max="100" step="1" required>
                        <small>Sinh vi√™n c√≥ t·ª∑ l·ªá n·ªôp b√†i th·∫•p h∆°n ng∆∞·ª°ng n√†y s·∫Ω ƒë∆∞·ª£c c·ªông 1 ƒëi·ªÉm r·ªßi ro</small>
                    </div>
                    <div class="form-group">
                        <label for="contactThreshold">Ng∆∞·ª°ng s·ªë l·∫ßn li√™n h·ªá th·∫•t b·∫°i:</label>
                        <input type="number" id="contactThreshold" min="0" step="1" required>
                        <small>Sinh vi√™n c√≥ s·ªë l·∫ßn li√™n h·ªá th·∫•t b·∫°i t·ª´ ng∆∞·ª°ng n√†y tr·ªü l√™n s·∫Ω ƒë∆∞·ª£c c·ªông 1 ƒëi·ªÉm r·ªßi
                            ro</small>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeConfigModal()">H·ªßy</button>
                <button class="btn btn-primary" onclick="saveConfiguration()">
                    <i class="fas fa-save"></i> L∆∞u c·∫•u h√¨nh
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Scripts -->
    <script src="js/main.js"></script>
</body>

</html>